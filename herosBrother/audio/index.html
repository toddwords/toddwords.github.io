<title>The Hero's Brother Audiobook Extras</title>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css" integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ" crossorigin="anonymous">
<style>
@font-face {
font-family: BradHand;
src: url('BRADHITC.TTF') format('truetype');
}
html, body {
	background-color: black;
	margin: 0; 
	height: 100%; 
	width: 100%; 
	overflow-x: hidden;
	color: lightgray;
	font-family: Century Gothic;
	margin-bottom:20px;
	position: fixed;
}
select {
	width:400px;
	height:50px;
	font-size: 21px;
	text-align: center;
	font-family: Century Gothic;
	background-color: black;
	border-radius: 3px;
	border-color: gray;
	border-width: 1px;
	color: lightgray;
	margin:auto;
	margin-top: 15px;
	padding-left: 10px;
	display:block;
}
#nav {
	margin-top: 20px;

}
#chapterSelect {
	font-size: 10px
}
.container {
	display: flex;
	justify-content:center;
}
.hero-img {
	display: block;
	margin:auto;
	position:absolute;
	margin-left: auto;
	margin-right: auto;
	left: 0;
	right: 0;
	max-height: 80%;
	max-width:95%;
	width:auto;
	/*height:auto;*/
	margin-top:auto;

}
.hidden {
	display:none;
}
.card {
  width:120px;
  height:80px;
  text-align: center;
  font-size:14px;
  margin-top:10px;
  margin-left: 20px;
  margin-right: 20px;
}
.card img {
  width:60px;
  height:60px;
  border-radius: 50%;
  opacity: 0.6;
  border:3px solid transparent;
}
.card p {
	font-weight: bold;
	margin-top: 5px;
}
.highlight {
	opacity: 1.0;
	border:4px solid #FF3333;
}
#mainContent {
	margin-top: 30px;
}

#fragmentImgDiv {
	display:none;
	flex-wrap: wrap

}
.fragTextDiv {
	/*display:none;*/
	background-image: url(images/parchment.png);
	margin-top:10px;
	margin-left:10px;
	margin-right:10px;
	margin-bottom:20px;
	height: 555.55px;
	width:400px;
	background-size: cover;
	transition: background-image 1s ease-in-out;
}
.fragTextDiv p {
	font-family:BradHand;
	color:black;
	padding:24px;
	font-size:24px;

	white-space: pre;
}
#ftd2 {
	display: none;
}
.doubleFragment {
	width:800px;
}
.doubleFragment p {
	margin-left:60px;
}
.fullText {
	width:600px;
	height:818.3px;
}
.fullText p {
	font-size: 18px;
	margin-top: 20px;
    margin-left: 40px;
}
@media screen 
  and (-webkit-min-device-pixel-ratio: 2) {

	#nav p {
	  	font-size: 24px;
	  }
	.card {
	  width:150px;
	  height:150px;
	}
	.card img {
	  width:120px;
	  height:120px;
	}
	select {
	width:600px;
	height:75px;
	font-size: 36px;
	}
	#mainContent {
		margin-top: 60px;
	}
}
</style>
<div id='nav' class='container'>
<div class='card' id='map'>
<img src='images/HBMap.jpg' />
<p>Map</p>
</div>
<div>
<p id='chapterSelect' style="text-align:center"><strong>SELECT A CHAPTER OR SCROLL</strong></p>
<select>
<option>00 - Cover<i class="far fa-image"></i></option>
<option>01 - Conall<i class="far fa-image"></i></option>
<option>02 - Confessor Guthlac's Pupil <i class="far fa-image"></i></option>
<option>03 - Ye Olde </option>
<option>04 - Nine Men's Morris</option>
<option>05 - The Singing Gamester </option>
<option>06 - One on One </option>
<option>07 - A Staggering Blow</option>
<option>08 - And Back Again </option>
<option>09 - The Boon </option>
<option>10 - To a Manor Borne </option>
<option>11 - Defective</option>
<option>12 - The Expected Shipwreck </option>
<option>13 - No Such Thing as a Free Lunch </option>
<option>14 - Who Had What? </option>
<option>15 - Let the Games Begin </option>
<option>16 - In the Wee Hours </option>
<option>17 - The Battle Cry </option>
<option>18 - Never a Cold Shoulder</option>
<option>19 - Summer's Discontents </option>
<option>20 - Taking the Lead </option>
<option>21 - An Awkward Suit </option>
<option>22 - A Motley Crew </option>
<option>23 - Remembrance of Desserts Past </option>
<option>24 - The Head Mark </option>
<option>25 - The Wright Thing </option>
<option>26 - Casting Aspersions </option>
<option>27 - Hell on the Ninth of the Circle </option>
<option>28 - Stopping Short </option>
<option>29 - Only Connecting </option>
<option>30 - The Tors of the Decoray </option>
<option>31 - A Balancing Act </option>
<option>32 - No Blessing in Disguise </option>
<option>33 - The Prized Prisoner </option>
<option>34 - A Deadly Conspiracy </option>
<option>35 - A Diminished Seventh </option>
<option>36 - True Visions at the Horn Gate </option>
<option>37 - Twenty Seconds </option>
<option>38 - The Grain Exchange </option>
<option>39 - The Narrow Tower </option>
<option>40 - Wasting Away </option>
<option>41 - Bedlam </option>
<option>42 - Keeping a Low Low Profile </option>
<option>43 - With the Forty-Seven </option>
<option>44 - In Their Cups </option>
<option>45 - Noman is an Island </option>
<option>46 - Cutting to the Chase </option>
<option>47 - Can You Go Home Again? </option>
<option>48 - The Tax Dodger </option>
<option>49 - Safe for a Spell </option>
<option>50 - Patent Filings </option>
<option>51 - Circling the Square </option>
<option>52 - Darkness Invisible </option>
<option>53 - All Together Now </option>
<option>54 - The Slender Black Sail </option>
<option>55 - Brothers </option>
<option>56 - The Song of Selflessness </option>
<option>57 - The Brother's Hero </option>
<option>58 - Penultimatum </option>
<option>59 - Last Chapter </option>
<option>60 - The Chapter After the Last Chapter </option>
</select>
</div>
<div class='card' id='fragments'>
<img src='images/THBAutumn.jpg' />
<p>Quadrants</p>
</div>
</div>
<div id="mainContent" class = 'container'>
	<div id='heroImgDiv'>
		<img class='hero-img visible' src='images/HBcitadel2.jpg' />
		<img class='hero-img hidden' src='images/HBcitadel2.jpg' />
	</div>
	<div id='fragmentImgDiv' class='container'>
		<div id='ftd1' class='fragTextDiv'><p></p></div>
		<div id='ftd2' class='fragTextDiv'><p></p></div>
		<img class='hero-img' src='' />
	</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.10/lodash.min.js"></script>
<script
  src="http://code.jquery.com/jquery-2.2.4.min.js"
  integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
  crossorigin="anonymous"></script>
  <script src="jquery.transit.min.js"></script>
<script>
var featured = 'image'
var ts;
var to1;
var to2;
var currentFragments;
$(document).bind('mousewheel', _.throttle(changeMenu, 400, { trailing: false, leading: true }));
// $(document).bind('touchmove', _.throttle(changeMenuTouch, 300, { trailing: true, leading: true }));
$(document).bind('touchstart', function (e){
   ts = e.originalEvent.touches[0].clientY;
   e.preventDefault();
   e.stopPropagation();
});
$(document).bind('touchend',changeMenuTouch)
$(document).bind('touchmove',function(e){e.preventDefault();e.stopPropagation()})
$(document).bind('scroll', function(e){e.preventDefault()})
$('select').change(function(){
	console.log($('select')[0].selectedIndex)
    if(featured == "image"){
    	updateImg($('select')[0].selectedIndex)
    }
    else if(featured == "fragments"){
    	updateFragment($('select')[0].selectedIndex)
    }
})
$('#map').click(function(){
	if(featured !== 'map'){
		if(featured == 'fragments'){
			setImg('HBMap.jpg')
			$('#heroImgDiv').fadeIn(800);
			$('#fragmentImgDiv').fadeOut(800);
			$('#fragments img').css({'border-color':'transparent'}).animate({opacity:0.6},800)
			
		} else {
			swapImg('HBMap.jpg')
		}
		featured = 'map';
		$('#map img').css({border:"3px solid #FF3333"}).animate({opacity:1},800)
	} else {
		featured = 'image'
		$('#map img').css({'border-color':'transparent'}).animate({opacity:0.6},800)
		updateImg($('select')[0].selectedIndex)
	}
})
$('#fragments').click(function(){
	if(featured !== 'fragments'){
		featured = 'fragments';
		$('#fragments img').css({border:"3px solid #FF3333"}).animate({opacity:1},800)
		$('#map img').css({'border-color':'transparent'}).animate({opacity:0.6},800)
		updateFragment($('select')[0].selectedIndex)	
	} else {
		featured = 'image'
		$('#fragments img').css({'border-color':'transparent'}).animate({opacity:0.6},800)
		$('#heroImgDiv').fadeIn(800);
		$('#fragmentImgDiv').fadeOut(800);
	}
})


function changeMenu(e){
	console.log('changing')
	if(featured == 'image'){


		if(e.originalEvent.wheelDelta /10 > 0) {
	            console.log('scrolling up !');
				$('select')[0].selectedIndex--;

	        }
	        else{
				$('select')[0].selectedIndex++;
	            console.log('scrolling down !');
	        }
	    if(featured == "image"){
	    	updateImg($('select')[0].selectedIndex)
	    }
	    // else if(featured == "fragments"){
	    // 	updateFragment($('select')[0].selectedIndex)
	    // }
    }


}
function changeMenuTouch(e){
	if(featured == 'image'){
	    var te = e.originalEvent.changedTouches[0].clientY;
	    var marginOfError = 5
		if(te < ts - marginOfError) {
				$('select')[0].selectedIndex++;
	        }
	    else if(te > ts + marginOfError){
				$('select')[0].selectedIndex--;
	    }
	    updateImg($('select')[0].selectedIndex)
	}
    // else if(featured == "fragments"){
    // 	updateFragment($('select')[0].selectedIndex)
    // }

}

function updateFragment(chapterNum){
	var fragmentImg;
	var fragmentImg2;
	var fragmentText;
	var fragmentText2;
	var prevFragments = currentFragments;
	$('.fragTextDiv').css('background-image', 'url(images/parchment.png')
	$('.fragTextDiv p').show()
	if(chapterNum < 11){
		$('#ftd1').css('background-image', 'url(images/noFragments.png')
		fragmentImg = 'url(images/noFragments.png)'
		fragmentText = ""
		fragmentText2 = ""
		currentFragments = 0;
	}
	else if(chapterNum >= 11 && chapterNum < 19){
		fragmentImg = 'url(images/THBAutumn.jpg)'
		fragmentText = autumnText
		fragmentText2 = false

		$('#ftd2').hide()
		currentFragments = 1;
	}
	else if(chapterNum >= 19 && chapterNum < 34){
		fragmentImg = 'url(images/ThbSeasonSummer.jpg)'
		fragmentImg2 = 'url(images/THBAutumn.jpg)'
		fragmentText = summerText
		fragmentText2 = autumnText
		currentFragments = 2;
	}
	else if(chapterNum >= 34 && chapterNum < 53){
		fragmentImg = 'url(images/summerSpringImage.png)'
		fragmentImg2 = 'url(images/THBAutumn.jpg)'
		fragmentText = summerSpringText
		fragmentText2 = autumnText
		currentFragments = 3;
	}
	else if(chapterNum >= 53){
		fragmentImg = 'url(images/54-THBSeasons4.jpg)'
		fragmentText = fullText
		$('#ftd2').hide()
		currentFragments = 4;
	}

	if($('#fragmentImgDiv').css('display') == 'none'){
		console.log('this should only run once per click')
		$('#heroImgDiv').fadeOut(800);
		$('#fragmentImgDiv').css('display','flex').hide().fadeIn(800);
	}
	else if(currentFragments !== prevFragments){
		$('#fragmentImgDiv').hide().fadeIn(800);
	}
		if(fragmentText == summerSpringText){
			$('#ftd1').addClass('doubleFragment').css('background-image', 'url(images/parchmentWide.png)')
		}else{
			$('#ftd1').removeClass('doubleFragment')
		}
		if(fragmentText == fullText){
			$('#ftd1').addClass('fullText')
		} else{
			$('#ftd1').removeClass('fullText')
		}
		$('#ftd1').off('click').click(function(){
			if($('#ftd1 p').is(':visible')){
				$(this).css('background-image',fragmentImg)
				$('#ftd1 p').fadeOut(1000)
			}
			else if(chapterNum >= 11){
				console.log(chapterNum)
				if($(this).hasClass('doubleFragment')){
					$(this).css('background-image','url(images/parchmentWide.png)')
				}
				else {
					$(this).css('background-image','url(images/parchment.png)')
				}
				$('#ftd1 p').fadeIn(1000)
			}
		})
		$('.fragTextDiv p').text(fragmentText)
		if(fragmentText2){
			$('#ftd2').show().off('click').click(function(){
				if($('#ftd2 p').is(':visible')){
					$(this).css('background-image',fragmentImg2);$('#ftd2 p').fadeOut(1000)
				}
				else {
					$(this).css('background-image','url(images/parchment.png)')
					$('#ftd2 p').fadeIn(1000)
				}
			})
			$('#ftd2 p').text(fragmentText2)
		}
		// $('#fragmentImgDiv img').attr('src', fragmentImg)
		// $('#fragmentImgDiv').fadeIn(800,function(){
		// 	$(this).css("display", "flex")
		// 	var w = $('#fragmentImgDiv img').width()
		// 	var h = $('#fragmentImgDiv img').height()
		// 	$('#fragmentImgDiv img').transition({rotateY:90}, 1500, function(){
		// 		$(this).attr('src',fragmentText).css('transform', 'rotateY(270deg)').transition({rotateY:360},1500,function(){
		// 			$(this).css('transform','rotateY(0deg)').fadeOut(400,function(){
		// 				$('.fragTextDiv p').text(autumnText)
		// 				$('.fragTextDiv').fadeIn()
		// 			})

		// 		})
				
		// 	})
		// })
	// } else if($('#fragmentImgDiv img').attr('src') !== fragmentImg && $('#fragmentImgDiv img').attr('src') !== fragmentText) {
	// 	console.log($('#fragmentImgDiv img').attr('src'))
	// 	$('#fragmentImgDiv').fadeOut(400, function(){
	// 		$('#fragmentImgDiv img').attr('src', fragmentImg)
	// 		$('#fragmentImgDiv').fadeIn(400,function(){
	// 			var w = $('#fragmentImgDiv img').width()
	// 			var h = $('#fragmentImgDiv img').height()
	// 			$('#fragmentImgDiv img').transition({rotateY:90}, 2000, function(){
	// 				// $(this).attr('src',fragmentText).css('transform', 'rotateY(270deg)').transition({rotateY:360},2000,function(){$(this).css('transform','rotateY(0deg)')})
	// 				$('.fragTextDiv').css({'background-image': 'url(images/parchment.png)', width: w, height: h}).css('transform', 'rotateY(270deg)').show().transition({rotateY:360},3000)
	// 				$('.fragTextDiv p').text(autumnText)
	// 			})
	// 	})
	// 	});
		
	// }
	

}
function updateImg(chapterNum){
	if(featured == 'image'){
		if(chapterNum <= 0){
			swapImg('HBcitadel2.jpg')
		}
		else if(chapterNum < 4){
			swapImg('thornBlackBG.png')
		}

		else if(chapterNum < 8){
			swapImg('nmm.jpg')
		}
		else if(chapterNum < 9){
			swapImg('litchgateTree.jpg')
		}
		else if(chapterNum < 11){
			swapImg('litchgateCage.jpg')
		}
		else if(chapterNum < 14){
			swapImg('autumnFragment.png')
		}
		else if(chapterNum < 19){
			swapImg('MapChapters11-19.png')
		}
		else if(chapterNum < 22){
			swapImg('summerFragment.png')
		}
		else if(chapterNum < 33){
			swapImg('MapChapters19-33.JPG')
		}
		else if(chapterNum < 34){
			swapImg('33-Pynchton.jpg')
		}
		else if(chapterNum < 35){
			swapImg('springFragment.png')
		}
		else if(chapterNum < 36){
			swapImg('springSummerText.png')
		}
		else if(chapterNum < 43){
			clearTimeout(to1)
			clearTimeout(to2)
			swapImg('MapChapters35-43.JPG')
		}
		else if(chapterNum < 47){
			clearTimeout(to1)
			clearTimeout(to2)
			swapImg('chester.jpg')
			to1 = setTimeout(function(){
				swapImg('herechester.jpg')
			},1600)
			to2 = setTimeout(function(){
				swapImg('Wherechester.jpg')
			},3200)
		}
		else if(chapterNum < 50){
			clearTimeout(to1)
			clearTimeout(to2)
			swapImg('EyrianSea.jpg')
		}
		else if(chapterNum < 53){
			swapImg('50-HauntedFortress-3.jpg')
		}
		else if(chapterNum < 54){
			swapImg('winterFragment.png')
		}
		else if(chapterNum < 57){
			swapImg('54-THBSeasons4.jpg')
		}
		else if(chapterNum < 60){
			swapImg('Gooldrin.png')
		}
	}
}

function swapImg(fileName){
	if($('img.visible').attr('src').indexOf(fileName) == -1){
		$('img.visible').fadeOut(800,function(){$(this).removeClass('visible').addClass('hidden')})
		$('img.hidden').attr('src', 'images/'+fileName).fadeIn(800,function(){$(this).removeClass('hidden').addClass('visible')})
	}
}

function setImg(fileName){
	$('img.visible').attr('src','images/'+fileName)
}


var autumnText = `daughter from the hidden fortress.
East right underneath
You will find a row of yews that
was stolen from me in Broceliande
Better beware of Gooldrin, who will
the amulet I wear on my foot
in a cave where I rested until I
y mon coming three times. He spoke
To let him in I spoke his name
you may take as reward
name I wood peace together for
God forgive me my many sins
arrant fool Culvert, against Corenbee
 Mercia. May God deliver her from
damnation. -Loveday Egnum`

var summerText = `I, Loveday Egnum, repent not 
...e Gilmore whose child Mercia 
traitor Gilmore's death, Elspeth, 
to protect Mercia from Sib 
kitchen with Sib's death I saw 
reveal her as Elspeth's daughter 
Sib's will was a forgery and had 
Gilmore's ring. Henry went mad 
a terrible king. Sib had left the 
were to Gracken who demanded 
Deep of Keep as prisoners where
...er. In truth, last May we were 
I escaped when he threatened to
rry him. I overheard a devil 
Gracken had hired Black Charlie to 
? ? ? `
var summerSpringText = `I, Loveday Egnum, repent not my sin of cuckolding Prince 
Gilmore, whose child Mercia is mine own. After the traitor 
Gilmore's death, Elspeth, my beloved, died giving birth. To 
protect Mercia from Sib I had her raised in Hugh's kitchen. 
With Sib's death, I saw that I could be with Mercia and reveal 
her as Elspeth's daughter. I bore false witness that Sib's will 
was a forgery and had Mercia discovered with Gilmore's ring. 
Henry went mad and proved he would have been a terrible 
king. Sib had left the coffers bare. Most of the debts were to 
Gracken, who demanded power. Soon we were in the Deep of 
Keep as prisoners. There I told Mercia I was her father in 
truth. Last May we were moved to Gracken's stronghold. I 
escaped when he threatened to kill me if Mercia did not marry 
him. I overheard a devilish plot to kill the Pope. Gracken had 
hired Black Charlie to arrange the foul deed.I beg you...` 
var fullText = `I, Loveday Egnum, repent not my sin of cuckolding Prince 
Gilmore, whose child Mercia is mine own. After the traitor 
Gilmore's death, Elspeth, my beloved, died giving birth. To 
protect Mercia from Sib I had her raised in Hugh's kitchen. 
With Sib's death, I saw that I could be with Mercia and reveal 
her as Elspeth's daughter. I bore false witness that Sib's will 
was a forgery and had Mercia discovered with Gilmore's ring. 
Henry went mad and proved he would have been a terrible 
king. Sib had left the coffers bare. Most of the debts were to 
Gracken, who demanded power. Soon we were in the Deep of 
Keep as prisoners. There I told Mercia I was her father in 
truth. Last May we were moved to Gracken's stronghold. I 
escaped when he threatened to kill me if Mercia did not marry 
him. I overheard a devilish plot to kill the Pope. Gracken had 
hired Black Charlie to arrange the foul deed.
 I beg you, the finder, to enlist Alexander and help him to 
deliver my daughter from the hidden fortress, which lies on 
the Isle of Feast, right underneath the famous haunted 
fortress. There you will find a row of yews that hides a portal, 
the key to which was stolen from me in Broceliande by Bob of 
Bedlam. As you enter, beware of Gooldrin, who will eat your 
soul, unless you bear the amulet I wear. At the foot of the cliff, 
I found shelter in a cave, where I rested until I heard the 
Magus of Caer Cymon coming. Three times he spoke his 
name. The cave wall parted to let him in. I spoke his name 
later and the magic door parted for me, also. I found hardly 
any gold therein, but a vast library, which you may take as 
reward for rescuing my daughter. The wizard's name I wood 
peace together for you: the wise will sea what I mien. God
forgive me my many sins: my adultery, my sins against that 
arrant fool Culvert, against Corenbee, but most of all against 
my beloved Mercia. May God deliver her from her bondage 
and my soul from damnation      --Loveday Egnum-- `
</script>